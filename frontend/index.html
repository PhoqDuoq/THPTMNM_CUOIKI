<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p Cu·ªëi K·ª≥ - Demo CI/CD</title>
    <style>
        body { font-family: sans-serif; padding: 20px; text-align: center; }
        .card { 
            border: 1px solid #ddd; padding: 20px; margin-top: 20px; 
            border-radius: 8px; max-width: 400px; margin-left: auto; margin-right: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button { 
            padding: 10px 20px; background: #007bff; color: white; 
            border: none; cursor: pointer; border-radius: 4px; font-size: 16px;
        }
        button:hover { background: #0056b3; }
        ul { list-style: none; padding: 0; }
        li { background: #f9f9f9; margin: 5px 0; padding: 10px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>
    <h1>FRONTEND DEMO</h1>
    <h1> B√†i ki·ªÉm tra - DH52201205 - Ca 2</h1>
    <p>B·∫•m n√∫t d∆∞·ªõi ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ Backend (Node.js)</p>
    
    <button onclick="fetchUsers()">üì• T·∫£i Danh S√°ch User</button>
    
    <div id="result" class="card">
        D·ªØ li·ªáu ch∆∞a t·∫£i...
    </div>

    <script>
        async function fetchUsers() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = "‚è≥ ƒêang k·∫øt n·ªëi server...";
            
            try {
                // G·ªçi v√†o Backend ƒëang ch·∫°y ·ªü port 3000
                const response = await fetch('http://localhost:3000/api/users');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                // Hi·ªÉn th·ªã d·ªØ li·ªáu l√™n m√†n h√¨nh
                let html = `<h3 style="color:green">${data.message}</h3><ul>`;
                data.data.forEach(user => {
                    html += `<li><strong>${user.name}</strong> <br> <small>Role: ${user.role}</small></li>`;
                });
                html += "</ul>";
                
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = `<p style="color:red">‚ùå L·ªói: Kh√¥ng k·∫øt n·ªëi ƒë∆∞·ª£c Backend!<br>H√£y ch·∫Øc ch·∫Øn c·ª≠a s·ªï Terminal backend v·∫´n ƒëang ch·∫°y.</p>`;
                console.error(error);
            }
        }
    </script>
</body>
</html>